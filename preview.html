<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="styles-preview.css">
    <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Alatsi&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/cropper/2.3.4/cropper.min.css'>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

</head>

<body>
    <span class="e22_16">Recipesia </span>
    
    <button onclick="getPage()">SEE PDF</button>
    <!-- <button onclick="loadPagePreview()">Load Preview</button> -->

    <div class="container">

        <div class="item-2" id="page">
            <div id="stuff">
                <img class="cropped" src="" alt=""> <!-- Don't touch dangeeerrr -->

                <h1 class="r-title" id="r-title">Tiramisu</h1>
                <hr>
                <div class="heading">
                    <span id="r-author"></span>
                    <span>Servings: <span id="r-serving">4 people</span></span>
                    <span>Time: <span id="r-time">1hr 20min</span></span>
                    <span>Difficulty: <span id="r-difficulty">easy</span></span>
                </div>
                <hr>
                <p>
                <h3>About the recipe</h3>
                <span  id="r-about">A food historian looks into the origins and the various interpretations of
                tiramisu, the most famous Italian dessert.
                Tiramisu is a velvety melange of savoiardi cookies dipped in an espresso, layered with delicately
                sweetened whipped eggs and
                mascarpone cheese, and topped with a dusting of cocoa powder
                </span></p>
                
                <h3>Incredients</h3>
                <div id="r-incredients">
                </div>
                <span class="r-steps" id="r-steps">
                    <h3>Directions</h3>
                    
                </span>
                <div>
                    <h3>Other side notes:</h3>
                    <span id="r-notes">
                        <h3>Notes</h3>
                    </span>
                </div>
            </div>
            
        </div>

        <!-- DANGERRRRRRRR  -->
        <div class="item-2" id="crop-porportion">
            <div class="box">
                <input type="file" id="file-input">
            </div>
            <!-- leftbox -->
            <div class="box-2">
                <div class="result"></div>
            </div>
            <!--rightbox-->
            <div class="box-2 img-result hide">
            </div>
            <!-- input file -->
            <div class="box">
                <div class="options hide">
                    <label> Width</label>
                    <input type="number" class="img-w" value="775" min="775" max="775" />
                </div>
                <!-- save btn -->
                <button class="btn save hide">Save</button>
                <!-- download btn -->
                <a href="" class="btn download hide">Download</a>
            </div>
        </div>
    </div>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/cropperjs/0.8.1/cropper.min.js'></script>
    <script src="./input.js"></script>
    <script src="script-form.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            loadPagePreview();
        }, false);
    

    </script>

    <script>
        function getPage(){
            var element = document.getElementById('page')
            element.style.display = "block"

            var opt = {
                margin:       0,
                // image:        { type: 'jpeg', quality: 1 },
                jsPDF:        { format: "A4", orientation: 'portrait' }
            };
            
            // html2pdf(element)
            html2pdf().set(opt).from(element).outputPdf().then(function(pdf) {

                    let pdfWindow = window.open("")
                pdfWindow.document.write(
                    "<iframe width='100%' height='100%' src='data:application/pdf;base64, " + encodeURI(btoa(pdf)) + "'></iframe>"
                )
            });
        }
    </script>

</body>

</html>